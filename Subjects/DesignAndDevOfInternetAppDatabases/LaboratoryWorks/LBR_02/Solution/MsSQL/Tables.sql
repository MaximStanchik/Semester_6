SELECT * FROM CLIENT;
SELECT * FROM CLIENT_INFO;
SELECT * FROM DRIVER;
SELECT * FROM DRIVER_INFO;
SELECT * FROM CARGO; 
SELECT * FROM CARGO_TYPE;
SELECT * FROM ORDERS; 
SELECT * FROM VEHICLE;  
SELECT * FROM VEHICLE_TYPE;
SELECT * FROM ROUTES;

SELECT * FROM SERVICE_TYPE;
SELECT * FROM SERVICES; 
SELECT * FROM ORDERS; 

DROP TABLE IF EXISTS ORDERS;
DROP TABLE IF EXISTS CLIENT_INFO;
DROP TABLE IF EXISTS DRIVER_INFO;
DROP TABLE IF EXISTS CARGO;
DROP TABLE IF EXISTS VEHICLE;
DROP TABLE IF EXISTS SERVICES;
DROP TABLE IF EXISTS ROUTES;
DROP TABLE IF EXISTS VEHICLE_TYPE;
DROP TABLE IF EXISTS SERVICE_TYPE;
DROP TABLE IF EXISTS CARGO_TYPE;
DROP TABLE IF EXISTS CLIENT;
DROP TABLE IF EXISTS DRIVER;

-- Информация о клиентах
CREATE TABLE CLIENT (
    ID INT IDENTITY(1,1) PRIMARY KEY,
    LOGIN NVARCHAR(255) NOT NULL, 
    PASSWORD NVARCHAR(255) NOT NULL
);

-- Дополнительная информация о клиентах
CREATE TABLE CLIENT_INFO (
    ID INT IDENTITY(1,1) PRIMARY KEY,
    CLIENT_ID INT NOT NULL,
    FIRST_NAME NVARCHAR(50) NOT NULL, 
    LAST_NAME NVARCHAR(50) NOT NULL, 
    MIDDLE_NAME NVARCHAR(50) NOT NULL, 
    ADDRESS NVARCHAR(255), 
    EMAIL NVARCHAR(100),
    PHONE_NUMBER NVARCHAR(50), 
    FOREIGN KEY (CLIENT_ID) REFERENCES CLIENT(ID)
);

-- Информация о водителях
CREATE TABLE DRIVER (
    ID INT IDENTITY(1,1) PRIMARY KEY,
    LOGIN NVARCHAR(255) NOT NULL, 
    PASSWORD NVARCHAR(255) NOT NULL
);

-- Дополнительная информация о водителях 
CREATE TABLE DRIVER_INFO (
    ID INT IDENTITY(1,1) PRIMARY KEY,
    DRIVER_ID INT NOT NULL,
    FIRST_NAME NVARCHAR(50) NOT NULL, 
    LAST_NAME NVARCHAR(50) NOT NULL, 
    MIDDLE_NAME NVARCHAR(50) NOT NULL, 
    ADDRESS NVARCHAR(255), 
    BIRTH_DATE DATE,
    EMAIL NVARCHAR(100),
    PASSPORT_NUM NVARCHAR(50) NOT NULL, 
    PHONE_NUMBER NVARCHAR(50), 
    VEHICLE_INFO INT NOT NULL,  
    FOREIGN KEY (DRIVER_ID) REFERENCES DRIVER(ID),
    FOREIGN KEY (VEHICLE_INFO) REFERENCES VEHICLE(ID)
);

-- Информация о грузах 
CREATE TABLE CARGO (
    ID INT IDENTITY(1,1) PRIMARY KEY,
    NAME NVARCHAR(50) NOT NULL, 
    DESCRIPTION NVARCHAR(255),
    WEIGHT DECIMAL(10, 2) NOT NULL, 
    VOLUME DECIMAL(10, 2) NOT NULL, 
    CARGO_TYPE INT,  
    HAZARDOUS NVARCHAR(7) CHECK (HAZARDOUS IN ('No', 'Class 1', 'Class 2', 'Class 3', 'Class 4', 'Class 5', 'Class 6', 'Class 7', 'Class 8', 'Class 9')),
    FOREIGN KEY (CARGO_TYPE) REFERENCES CARGO_TYPE(ID)
);

-- Типы грузов
CREATE TABLE CARGO_TYPE (
    ID INT IDENTITY(1,1) PRIMARY KEY,
    NAME NVARCHAR(255) NOT NULL, 
    DESCRIPTION NVARCHAR(255) NOT NULL
);

-- Информация о заказах
CREATE TABLE ORDERS (
    ID INT IDENTITY(1,1) PRIMARY KEY,
    CLIENT_ID INT NOT NULL,
    DRIVER_ID INT, 
    SERVICE_ID INT NOT NULL,
    STATUS NVARCHAR(50) CHECK (STATUS IN ('Pending', 'In Transit', 'Delivered', 'Cancellation Requested', 'Cancelled', 'On Hold', 'Returned', 'Lost', 'Awaiting Pickup', 'Out for Delivery', 'Completed', 'Exception', 'Scheduled', 'In Warehouse', 'Awaiting Clearance', 'Delayed')),
    CREATED_AT DATETIME DEFAULT GETDATE(),
    ROUTE INT NOT NULL,
    DELIVERY_TYPE NVARCHAR(50) NOT NULL,
    TOTAL_WEIGHT DECIMAL(10, 2),
    TOTAL_VOLUME DECIMAL(10, 2),
    DELIVERED_AT DATETIME,
    FOREIGN KEY (CLIENT_ID) REFERENCES CLIENT(ID),
    FOREIGN KEY (DRIVER_ID) REFERENCES DRIVER(ID),  
    FOREIGN KEY (SERVICE_ID) REFERENCES SERVICES(ID),
    FOREIGN KEY (ROUTE) REFERENCES ROUTES(ID)
);

-- Информация о транспортных средствах
CREATE TABLE VEHICLE (
    ID INT IDENTITY(1,1) PRIMARY KEY,
    DRIVER_ID INT NOT NULL,
    VEHICLE_TYPE INT NOT NULL,  
    LICENSE_PLATE NVARCHAR(20) NOT NULL,
    MODEL NVARCHAR(50) NOT NULL, 
    CAPACITY DECIMAL(10, 2) NOT NULL, 
    INSURANCE_EXPIRY DATE NOT NULL,
    STATUS NVARCHAR(20) CHECK (STATUS IN ('In transit', 'Arrived', 'At stop', 'Delayed', 'Cancelled', 'Under maintenance', 'Available', 'On route', 'Delivered', 'Waiting', 'Issue with cargo', 'Free', 'Busy', 'Searching', 'Completed', 'On platform')),  
    FOREIGN KEY (DRIVER_ID) REFERENCES DRIVER(ID),
    FOREIGN KEY (VEHICLE_TYPE) REFERENCES VEHICLE_TYPE(ID)  
);

-- Типы транспортных средств
CREATE TABLE VEHICLE_TYPE (
    ID INT IDENTITY(1,1) PRIMARY KEY,
    NAME NVARCHAR(255) NOT NULL,
    DESCRIPTION NVARCHAR(255) NOT NULL
);

-- Типы услуг
CREATE TABLE SERVICE_TYPE (
    ID INT IDENTITY(1,1) PRIMARY KEY,
    NAME NVARCHAR(255) NOT NULL,
    DESCRIPTION NVARCHAR(255) NOT NULL
);

-- Информация об услугах
CREATE TABLE SERVICES (
    ID INT IDENTITY(1,1) PRIMARY KEY,
    NAME NVARCHAR(255) NOT NULL,
    DESCRIPTION NVARCHAR(255) NOT NULL,
    BASE_RATE DECIMAL(10, 2),  
    SERVICE_TYPE_ID INT,  
    CREATED_AT DATETIME DEFAULT GETDATE(),
    FOREIGN KEY (SERVICE_TYPE_ID) REFERENCES SERVICE_TYPE(ID)
);

-- Информация о маршрутах
CREATE TABLE ROUTES (
    ID INT IDENTITY(1,1) PRIMARY KEY,
    START_LOCATION NVARCHAR(255) NOT NULL,  
    END_LOCATION NVARCHAR(255) NOT NULL,    
    DISTANCE DECIMAL(10, 2)            
);